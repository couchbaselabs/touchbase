<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Couch411 | Login</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"/>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.min.js"></script>
  <link href="./ng-cropper/dist/ngCropper.all.css" rel="stylesheet">
  <script src="./ng-cropper/dist/ngCropper.all.js"></script>
  <script src="./js/search.js"></script>
  <!--<script src="ng-flow-standalone.js"></script>
  <script src="ng-img-crop.js"></script>
  <link rel="stylesheet" type="text/css" href="ng-img-crop.css"/>-->
</head>
<body ng-app="search" ng-controller="searchController" ng-init="printLocalStorage()">
  <h4> We at pictureUpload.html!! </h4>
  <script type="text/javascript">
    $(window).load(function(){
        $('#myModal').modal('show');
    });
    
    var closemodal = function() { $('#myModal').modal('hide'); };
  </script>
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
              <form id = "uploadForm" action="/api/uploadAttempt" method="post" enctype="multipart/form-data">
                <div class="modal-header">
                    <!--<button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>-->
                    <h4 class="modal-title" id="myModalLabel">Upload Profile Picture</h4>
                </div>
                <div class="modal-body">
                    <input type="file" onchange="angular.element(this).scope().onFile(this.files[0])" accept="image/*" name="userPhoto">
                      <button ng-click="preview()">Show preview</button>
                      <button ng-click="scale(200)">Scale to 200px width</button>
                      <label>Disabled <input type="checkbox" ng-model="options.disabled"></label>

                      <br />

                      <div ng-if="dataUrl" class="img-container">
                        <img ng-if="dataUrl" ng-src="{{dataUrl}}" width="300"
                             ng-cropper
                             ng-cropper-show="showEvent"
                             ng-cropper-hide="hideEvent"
                             ng-cropper-options="options">
                      </div>

                      <div class="preview-container">
                        <img ng-if="preview.dataUrl" ng-src="{{preview.dataUrl}}">
                      </div>
                      <!--<form id = "uploadForm" action="/api/uploadAttempt" method="post" enctype="multipart/form-data">
                        <input type="file" name="userPhoto" accept="image/*"/>
                        <input type="submit" value="Upload Image" name="submit">
                      </form>-->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">No Thanks</button>
                    <input type="text" value="{{photoID}}" name="cookieID" hidden>
                    <input type="submit" value="Upload Picture" name="submit" class="btn btn-primary" onclick="closemodal()">
                </div>
          </form>
        </div>
    </div>
  </div>
</body>