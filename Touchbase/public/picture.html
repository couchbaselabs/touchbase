<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Touchbase | Register</title>
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=RobotoDraft:300,400,500,700,400italic">
  <meta name="viewport" content="initial-scale=1" />
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  
  <!-- Angular Material Dependencies -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.15/angular-ui-router.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/0.9.4/angular-material.min.js"></script>
  <link href="./ng-cropper/dist/ngCropper.all.css" rel="stylesheet">
  <script src="./ng-cropper/dist/ngCropper.all.js"></script>
  <script src="js/touchbase.js"></script>
  <link rel="stylesheet" type="text/css" href="/semantic-ui/dist/semantic.min.css">

  <!-- Site Properities -->
  <style type="text/css">
    body {
      background-color: #BD1C14;
    }
    body > .grid {
      height: 100%;
    }
    .image {
      margin-top: -100px;
    }
    .column {
      max-width: 450px;
    }
  </style>
  <script type="text/javascript">
  $(document)
      .ready(function() {
        $("#divUpload").on("click", function() {
        $('#hidde-new-file').click(); 
      });
    })
    ;
  </script>
</head>

<body ng-app="touchbase" ng-controller="pictureController" ng-init="getSessionInfo()">
  <script>
    function redirect() {
      window.location.href=('nav.html');
      return false;
    }
  </script>
  <div class="ui middle aligned center aligned grid">
  <div class="column">
    <h2 class="ui white inverted header">
      <img src="icons/touchbaseLogo.png" class="image">
      <div class="content">
        Touchbase | Upload Picture
      </div>
    </h2>
    <form class="ui form" id = "uploadForm" action="/api/uploadAttempt" method="post" enctype="multipart/form-data">
              <br />
              <div class="ui blue labeled icon button" id="divUpload">
                Choose Image for Crop
                <i class="white inverted upload icon"></i>
              </div>
              <input type="file" onchange="angular.element(this).scope().onFile(this.files[0])" id="hidde-new-file" name="userPhoto" value="Grey Button" accept="image/*" style="display: none"required/>
                <br />
                <br />
                <div ng-if="dataUrl" class="img-container">
                  <img ng-if="dataUrl" ng-src="{{dataUrl}}" width="300"
                       ng-cropper
                       ng-cropper-show="showEvent"
                       ng-cropper-hide="hideEvent"
                       ng-cropper-options="options">
                </div>
                <br />
                <br />
                <div class="preview-container">
                  <img ng-if="preview.dataUrl" ng-src="{{preview.dataUrl}}">
                </div>
              <a type="button" class="ui grey button" href="nav.html">No Thanks</a>
              <input type="hidden" value="{{sessionInfo.sessionID}}" name="sessionID" >
              <input type="hidden" value="{{cropDim}}" name="cropDim" >
              <a href="nav.html">
                <input class="ui green button" ng-click="finalCropCheck();" type="submit" value="Upload Picture" name="submit"/>
              </a>
          </div>
      <!--<button class="ui fluid large blue submit button" ng-click="registerUser(formData)"> Upload </button>
      <a class="ui fluid large blue submit button" href="nav.html"> No Thanks </a>-->
    </form>
</body>
